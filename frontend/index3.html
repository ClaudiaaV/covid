<!DOCTYPE html>
<html>


  <link rel="stylesheet" href="../global.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>COVID PLUS</title>

  <style>
    ::placeholder {
      color: white;
      opacity: 1;
      text-align: center;
    }

    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background-color: #B0E0E6;
    }

    .p p {
      display: block;
      height: 20px;
      width: 50%;
      text-align: center;
    }

    label {
      width: 300px;
      clear: left;
      text-align: right;
      padding-right: 20px;
      font-size: 21px;
    }

    ::placeholder {
      color: white;
      opacity: 1;
      text-align: center;
    }

    h1 {
      letter-spacing: 10px;
      font-weight: 500;
      padding-top: 15px;
      color:whitesmoke;
     
    }
h3{
  
  color:whitesmoke;
  letter-spacing: 5px;
  font-weight: 200;
 
}

    input {
      height: 30px;
      flex: 0 20 150px;
      margin-left: 20px;
      background-color: #4d004d;
      color: white;
      border: none;
      outline: none;
      padding: 12px;
    }

    button {
      background-color: #ebc6eb;

    }

    button {
      width: 200px;
    }

    .centered img {
      width: 200px;
      border-radius: 50%;
    }

    .navbar {
     
     padding-top:1px;
     padding-bottom: 1px;
     padding-left: 10px;
     font-size: 10px;
   }


 .navbar a:hover {
     background-color: rgb(140, 197, 243);
     color: #8bb9f5;
   }


   .nav-item{
    padding-left: 40px;
  color:white;
}
.navbar-brand{
 padding-left: 10px;
}

.nav-link{
    
    color: white;
    
} 
    .myGrid {
      width: 500px;
      height: 1050px;
    }

    .container {
      position: relative;
      width: 90%;
      height: 99%;
      background-color: rgba(85, 151, 236, 0.836);
    }

    .hyphens {
      hyphens: auto;
    }

    #canvas {
      width: 80%;

    }

    /* .myDiv{
 
  border: 5px outset rgba(85, 151, 236, 0.836);
  background-color: lightblue;    
  text-align: center;
  width: 140px;
  height: min-content;
  padding-left: 0%;
  padding-right: 5px;
 
} */

    .centered {
      position: relative;
      height: 100px;
      width: auto;
      background-color: #B0E0E6;
    }

    .myDiv:hover {
      background-color: #7aa6f7;
    }

    .flex-container {

      display: flex;
      background-color: rgba(85, 151, 236, 0.836);

    }

    .flex-container>div {
      border: 7px outset rgba(85, 151, 236, 0.836);
      background-color: lightblue;
      text-align: center;
      padding: 5px;
      font-size: 13px;
      margin: 10px;

    }

    .myChart {
      margin-left: 550px;

    }
    #myBtn {
  display: none; /* Hidden by default */
  position: fixed; /* Fixed/sticky position */
  bottom: 5px; /* Place the button at the bottom of the page */
  right: 5px; /* Place the button 30px from the right */
  z-index: 99; /* Make sure it does not overlap */
  border: none; /* Remove borders */
  outline: none; /* Remove outline */
  background-color: rgba(85, 151, 236, 0.836); /* Set a background color */
  color: white; /* Text color */
  cursor: pointer; /* Add a mouse pointer on hover */
  padding: 5px; /* Some padding */
  border-radius: 10px; /* Rounded corners */
  font-size: 15px; /* Increase font size */
  opacity: 0.4;
  height: 40px;
  width: 40px;
}

#myBtn:hover {
  background-color: rgba(85, 150, 236, 0.644); /* Add a dark-grey background on hover */
}
  </style>

  <title>COVID PLUS</title>

  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.0/dist/chart.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://unpkg.com/ag-grid-community/dist/ag-grid-community.min.noStyle.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-grid.css">
  <link rel="stylesheet" href="https://unpkg.com/ag-grid-community/dist/styles/ag-theme-alpine.css">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
   integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

</head>

<body>

  <body style="background-color:#87CEFA;">
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: rgb(85, 150, 236); height: 27px;">
      <a class="navbar-brand" href="index.html" style="font-size: 16px;color:white;">ACASĂ</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" 
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item ">
            <a class="nav-link" style="color: white;" href="index2.html">DATE LA ZI <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" style="color: white;" href="index3.html">STATISTICI</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color: white;" href="#" id="navbarDropdown" role="button" 
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              SĂNĂTATE
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown" style="background-color: rgba(85, 151, 236, 0.836)">
              <a class="dropdown-item" style="color: white;" href="index4.html">Informații relevante</a>
              <a class="dropdown-item" style="color: white;"  href="index5.html">Simptome</a>
              <a class="dropdown-item" style="color: white;"  href="index9.html">Transmitere</a>
              <a class="dropdown-item" style="color: white;"href="index6.html">Testare</a>
              <a class="dropdown-item" style="color: white;"href="index8.html">Tratament</a>
              <a class="dropdown-item" style="color: white;"href="index7.html">Complicații</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" style="color: white;" href="#" id="navbarDropdown" role="button" 
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              PROTECȚIE
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown"  style="background-color: rgba(85, 151, 236, 0.836)">
              <a class="dropdown-item" style="color: white;" href="index11.html">Igienă</a>
              <a class="dropdown-item" style="color: white;" href="index12.html">Distanțare</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" style="color: white;" href="index13.html">VACCINARE</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" style="color: white;" href="appointment.html">PROGRAMARE</a>
          </li>
          <li class="nav-item">
            <li class="nav-item">
              <a class="nav-link" style="color: white;" href="feedback.html">FEEDBACK</a>
              <li class="nav-item">
                <a class="nav-link" style="color: white;" href="index15.html">SURSE IMPORTANTE</a>
              </li>
            </li>
            <a class="nav-link" style="color: white;" href="about.html">DESPRE NOI</a>
          </li>
        </ul>
      </div>
    </nav>

    <div id="loader"> </div>

    <h1 align="center">MediCov</h1>
    <h3 align="center">Echipa ta de specialiști</h3><br>
    <div class="card-columns"></div>

    <!-- GRAFICE -->
    <div class="row mx-0">
      <div class="col-6">
        <div id="cazuriPeZi"></div>
      </div>
      <div class="col-6">
        <div id="vindecatiPeZi"></div>
      </div>
    </div>

    <div class="row mx-0">
      <div class="col-6">
        <div id="mortiPeZi"></div>
      </div>
      <div class="col-6">
        <div id="terapieIntensiva"></div>
      </div>
    </div>

    <div class="row mx-0">
      <div class="col-6">
        <div id="numarTeste"></div>
      </div>
      <div class="col-6">
        <div id="rataCrestere"></div>
      </div>
    </div>

    <!-- DACA VREI SA FIE PE TOATA PAGINA CA INAINTE DECOMENTEAZA ASTA SI STERGE SUS
    <div id="cazuriPeZi"></div>
    <div id="vindecatiPeZi"></div>
    <div id="mortiPeZi"></div>
    <div id="terapieIntensiva"></div>
    <div id="terapieIntensiva"></div>
    <div id="numarTeste"></div>
    <div id="rataCrestere"></div> -->

    <div id="pie" class="card text-white bg-primary mb-3" style="max-width: 20rem;">
      <div class="card-header" align="center">Procent cazuri in functie de sex</div>
      <canvas id="myChart" width="200" height="200"></canvas>
    </div>



  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Copii', 'Femei', 'Bărbați'],
        datasets: [{
          label: 'Procentul de persoane afectate in functie de sex',
          data: [4, 55, 41],
          backgroundColor: [
            'rgb(250, 240, 230)',
            'rgb(192,192,192)',
            'rgb(255, 218, 185)'
          ],
          borderColor: ['rgba(233,150,122)',
            'rgba(112,128,144)',
            'rgba(222,184,135)'
          ],
          hoverOffset: 5


        }]
      },
      options: {
        animation: {
          duration: 1000
        }

      }
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>


  <script>
    let vectorCazuri
    let ultimaZi
    let cazuriPeZi
    let dateCalendaristice
    let totalPeZi

    getCases()

    function getCases() {
      document.getElementById("pie").style.display = "none";
      const api = `https://covid19.geo-spatial.org/api/dashboard/getDailyCases`;


      fetch(api)
        .then(response => {
          return response.json();
        })
        .then(data => {
          vectorCazuri = data.data.data
          ultimaZi = vectorCazuri.length - 1 // iei automat ultima zi adica dimensiunea vectorului -1
          cazuriPeZi = vectorCazuri.map(cazPeZi => cazPeZi.Cazuri);
          datePeZi = vectorCazuri.map(cazPeZi => cazPeZi.Data);
          totalPeZi = vectorCazuri.map(cazPeZi => cazPeZi.Total);
          mortiPeZi = vectorCazuri.map(cazPeZi => cazPeZi.Morti);
          numarTeste = vectorCazuri.map(cazPeZi => cazPeZi['Nr de teste']);
          terapieIntensiva = vectorCazuri.map(cazPeZi => cazPeZi['Terapie intensiva']);
          rataCrestere = vectorCazuri.map(cazPeZi => cazPeZi['Rata de crestere']);
          vindecatiPeZi = vectorCazuri.map(cazPeZi => cazPeZi['Vindecati pe zi']);
          getChart(cazuriPeZi,datePeZi,'cazuriPeZi', 'Cazuri pe zi', 'Cazuri noi')
          getChart(vindecatiPeZi,datePeZi,'vindecatiPeZi', 'Vindecati pe zi', 'Vindecati')
          getChart(mortiPeZi,datePeZi,'mortiPeZi', 'Decese cumulate pe zi', 'Decese')
          getColumnChart(terapieIntensiva, datePeZi,'terapieIntensiva', 'Terapie Intensiva', 'Terapie Intensiva')
          getColumnChart(numarTeste, datePeZi,'numarTeste', 'Numar Teste', 'Teste')
          getColumnChartBetweenValues(rataCrestere, datePeZi,'rataCrestere', 'Rata Crestere', 'Rata Crestere', 1, 2)
          document.getElementById("loader").style.display = "none";
          document.getElementById("pie").style.display = "block";
        })
    }

    function getChart(verticalData, orizontalData, tableId, numeGrafic = 'Grafic', numeIntrare = 'Y') {
      var options = {
        series: [{
          name: numeIntrare,
          data: verticalData,
        }],
        chart: {
          height: 350,
          type: 'area',
          zoom: {
            enabled: true
          },
        },
        yaxis: {
          min: 0,
          title: {
              text: numeIntrare,
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: numeGrafic,
          align: 'centred'
        },
        grid: {
          row: {
            colors: ['#ffffff', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },
        xaxis: {
          categories: orizontalData
        },
        legend: {
          horizontalAlign: 'left'
        }
      };

      var chart = new ApexCharts(document.querySelector('#' + tableId), options);
      chart.render();
    }

    function getColumnChart(verticalData, orizontalData, tableId, numeGrafic = 'Grafic', numeIntrare = 'Y') {
      var options = {
        series: [{
          name: numeIntrare,
          data: verticalData
        }],
        chart: {
          height: 350,
          type: 'bar',
          zoom: {
            enabled: true
          },
        },
        dataLabels: {
          enabled: false
        },
        yaxis: {
          min: 0,
          title: {
              text: numeIntrare,
          }
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: numeGrafic,
          align: 'centred'
        },
        grid: {
          row: {
            colors: ['#ffffff', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },
        xaxis: {
          categories: orizontalData
        },
        legend: {
          horizontalAlign: 'left'
        }
      };

      var chart = new ApexCharts(document.querySelector('#' + tableId), options);
      chart.render();
    }

    function getColumnChartBetweenValues(verticalData, orizontalData, tableId, numeGrafic = 'Grafic', numeIntrare = 'Y', minVal, maxVal) {
      var options = {
        series: [{
          name: numeIntrare,
          data: verticalData
        }],
        chart: {
          height: 350,
          type: 'bar',
          zoom: {
            enabled: true
          },
        },
        yaxis: {
          min: minVal,
          max: maxVal,
          title: {
              text: numeIntrare,
          }
        },
        dataLabels: {
          enabled: false
        },
        stroke: {
          curve: 'straight'
        },
        title: {
          text: numeGrafic,
          align: 'centred'
        },
        grid: {
          row: {
            colors: ['#ffffff', 'transparent'], // takes an array which will be repeated on columns
            opacity: 0.5
          },
        },
        xaxis: {
          categories: orizontalData
        },
        legend: {
          horizontalAlign: 'left'
        }
      };
      

      var chart = new ApexCharts(document.querySelector('#' + tableId), options);
      chart.render();
  }

  </script>
    <button onclick="topFunction()" id="myBtn" title="Go to top"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAQlBMVEX///8AAADq6uodHR3u7u4ZGRns7OydnZ2ampogICAXFxcYGBjo6OiVlZWSkpKenp6kpKQRERGLi4vNzc04ODhHR0eB+CorAAACxElEQVR4nO3a21ajQBBGYZoAOTAaRX3/V50gYUKAKjrQTB/W/m5FFr/VRVXULAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWFN+F70fYV1WaS+77IfaUn40xh4QjFrVpfSZ7UIuD6ZSJRsxL00uzF6uzeUixF4vSDF2SO6jVwTyrK9+P5FY+Dng7qH98P5RLxTTg7Y2aUBVnA6Y0NKrLbMDb6E/kjZqfhYCpDI1CquBvFRM4qEIPpvO6mRkTzy6RD41K7sE0enHhiN6rGHEvTlY1IWK0VVTGxOigRtqLVkf0XsUo36gvBIxzgcu1QT8V3wJnMSaexTY01FVNqGJUB1XpwR/xKzH1orKqNdm7HDGaoaEM+ub2ZTniIZKhoRzR5vcCOWIdxUGtSjFAc7+kEa+IYYFTVrXm30XKQQ0+YiFX8H1wmRwx9E8aiz3YU96oQUfMa6sKtt7EK0Ne4JRVbRxQixhuL1r2YE+OGGovKj04F1CLGOZv4JRVbT6gGjHABU6p4Jv4TTFV8eUj2lEiBtaLlf2YeBbL0FBWNfmIdk7id4Y0NJRP9EsBtYjhfOpf2YO98Hsxlwf9cgVbchXD+LONsqrZBQy9F5VV7WR9k6NcRe8HVfmdjH1ArYq15yoqY+KVgFoV/f7ZRnmLvhZQi+jzv6ccBtQi+hsa4v/JrAmoRfS1wCljYk3ALLuK9/MzNJRVbV1ALaKPBU75wLs2oNqL//+NKj/MccNd5SpuuetKUsRtjyJFXH8uNpjfQ7b+rOcj2m64js1VcfvPei6ilwq2phGvDu76EU7AaUQXAacRPQYc96KbgOOInnqwN6zih7O7DiN6rWDruEPAYUTvAR8H1WXAR0TPR7Rz2iFgHzGACraOOwTsIgYSsI3oPmAbMZiAWfYV0V0BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGj9BRi7E+kkbkfPAAAAAElFTkSuQmCC" style=" margin-left: 1px;height:20px;width: 20px;"></button>

    <script>
    //Get the button
    var mybutton = document.getElementById("myBtn");
    
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};
    
    function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        mybutton.style.display = "block";
      } else {
        mybutton.style.display = "none";
      }
    }
    
    // When the user clicks on the button, scroll to the top of the document
    function topFunction() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
    }
    </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.3.0/dist/chart.min.js"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="../app.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" 
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" 
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" 
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
</html>